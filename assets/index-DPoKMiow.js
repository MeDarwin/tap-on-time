var b=Object.defineProperty;var C=(i,t,e)=>t in i?b(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>(C(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const v=document.getElementById("tap-btn");class I{constructor(t){this.game=t,this.color="#c17aff",this.size=t.height,this.speed=t.difficulty.speed,this.x=1,this.y=t.verticalCenter(this.size),this.spacebarPressed=!1,this.hittable=!1,this.maxSpeed=this.game.difficulty.speed+5,window.onkeydown=e=>{t.status!=="finished"&&e.key===" "&&!this.spacebarPressed&&(this.hittable?this.successHit():this.failHit(),this.spacebarPressed=!0,t.status==="unstarted"&&t.gameStart())},window.onkeyup=e=>{e.key===" "&&(this.spacebarPressed=!1)},v.onpointerdown=()=>{t.status!=="finished"&&(this.spacebarPressed||(this.hittable?this.successHit():this.failHit(),t.status==="unstarted"&&t.gameStart()))}}draw(){this.game.ctx.save(),this.game.ctx.fillStyle=this.color,this.game.ctx.fillRect(this.x,this.y,this.size,this.size),this.game.ctx.restore()}update(){this.checkCollisionCanvasEnd(),this.checkCollisionCanvasStart(),this.watchHitable(),this.move()}watchHitable(){this.game.targetScene.isInsideTarget(this.x,this.size)?this.hittable=!0:this.hittable=!1}successHit(){this.game.score+=25,this.game.difficulty.speed<this.maxSpeed&&this.increaseSpeed(),this.game.targetScene.width=this.game.targetScene.generateRandomWidth(),this.game.difficulty.size>30&&this.increaseDifficulty(),this.game.targetScene.x=this.game.targetScene.generateXposition(),this.game.popupScore("+25")}failHit(){this.game.score<5?this.game.score=0:this.game.score-=5,this.game.popupScore("-5")}increaseDifficulty(){this.game.difficulty.size-=2}increaseSpeed(){const t=Math.fround(this.game.difficulty.speed+=.1).toFixed(1);this.speed<0?this.speed=-Math.abs(t):this.speed=Math.abs(t)}move(){this.x+=this.speed}calculateScore(){this.game.score<10?this.game.score-=this.game.score:this.game.score-=10}checkCollisionCanvasEnd(){this.x>this.game.width-this.size&&(this.speed=-Math.abs(this.speed),this.calculateScore())}checkCollisionCanvasStart(){this.x<=0&&(this.speed=Math.abs(this.speed),this.calculateScore())}}class E{constructor(t){this.game=t,this.height=t.height,this.width=this.generateRandomWidth(),this.x=this.generateXposition(),this.y=t.verticalCenter(this.height),this.color="violet"}draw(){this.game.ctx.save(),this.game.ctx.strokeStyle=this.color,this.game.ctx.lineWidth=2,this.game.ctx.strokeRect(this.x,this.y,this.width,this.height),this.game.ctx.restore()}update(){}generateXposition(){const t=Math.floor(Math.random()*this.game.width);return t>this.game.width-this.width?this.game.width-this.width:t}generateRandomWidth(){return~~(Math.random()*this.game.difficulty.size+this.game.difficulty.size*1.25)}isInsideTarget(t,e){return t+e>=this.x&&t<=this.x+this.width}}const p=document.getElementById("minute"),g=document.getElementById("second"),S=document.getElementById("millisecond");class M{constructor(t){this.game=t,this.minutes=1,this.seconds=0,this.milliseconds=0,S.textContent=this.milliseconds<10?`0${this.milliseconds}`:this.milliseconds,g.textContent=this.seconds<10?`0${this.seconds}`:this.seconds,p.textContent=this.minutes<10?`0${this.minutes}`:this.minutes}watchTimerStatus(){this.milliseconds===0&&this.seconds===0&&this.minutes===0&&this.game.gameStop()}timerStart(){this.timerId=setInterval(()=>{this.watchTimerStatus(),S.textContent=this.milliseconds<10?`0${this.milliseconds}`:this.milliseconds,g.textContent=this.seconds<10?`0${this.seconds}`:this.seconds,p.textContent=this.minutes<10?`0${this.minutes}`:this.minutes,this.milliseconds>0?this.milliseconds--:(this.milliseconds=99,this.seconds>0?this.seconds--:(this.seconds=59,this.minutes--))},10)}timerStop(){clearInterval(this.timerId)}}const T=document.getElementById("score");class z{constructor(t,e,c){h(this,"ctx");h(this,"width");h(this,"height");h(this,"difficulty");h(this,"status");this.ctx=e,this.width=t.width,this.height=t.height,this.difficulty=c,this.spriteScene=new I(this),this.targetScene=new E(this),this.timerScene=new M(this),this.score=0,this.status="unstarted"}popupScore(t="0"){let e=document.createElement("span");e.className="text-white text-3xl font-bold absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",e.innerHTML=t,e.style.translate=`${~~(Math.random()*201)-100}px ${~~(Math.random()*201)-100}px`,document.getElementById("main").appendChild(e),setTimeout(()=>{e.remove()},500)}draw(){this.targetScene.draw(),this.spriteScene.draw()}update(){this.status!=="finished"&&(this.spriteScene.update(),this.targetScene.update(),this.updateScore())}updateScore(){T.textContent=`Score: ${this.score}`}verticalCenter(t){return this.height/2-t/2}gameStart(){this.status="started",this.timerScene.timerStart()}gameStop(){this.status="finished",this.timerScene.timerStop(),this.showFinalScore()}showFinalScore(){let t=document.createElement("div");t.className="text-white text-3xl font-bold w-1/3 bg-purple-500 rounded text-center absolute top-1/3 left-1/2 -translate-x-1/2 -translate-y-1/2",t.innerHTML=`Score: ${this.score}`,document.getElementById("main").appendChild(t)}}const H=1e3,o={easy:{speed:6,size:90},medium:{speed:10,size:50},hard:{speed:13,size:30}},a=document.getElementById("cvs"),w=a.getContext("2d"),P=document.getElementById("difficulty"),m=new URLSearchParams(window.location.search).get("difficulty"),B=Object.keys(o).includes(m)?o[m]:o.easy;P.textContent=m??"easy";a.width=300;a.height=20;let u,d,f,l;const y=new z(a,w,B),x=()=>{requestAnimationFrame(x),d=Date.now(),l=d-f,l>u&&(w.clearRect(0,0,a.clientWidth,a.clientHeight),y.draw(),y.update(),f=d-l%u)},L=(i=1)=>{u=H/i,f=Date.now(),x()};document.addEventListener("DOMContentLoaded",L(45));
